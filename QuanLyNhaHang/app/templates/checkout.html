{% extends "layout/base.html" %}
{% block title %}Thanh toán - {{ r.name }}{% endblock %}
{% block content %}
<a class="btn btn-link mb-3" href="{{ url_for('show_cart', restaurant_id=r.id) }}">&larr; Quay lại giỏ hàng</a>

<div class="row g-3">
  <div class="col-lg-7">
    <div class="card h-100">
      <div class="card-header"><h5 class="mb-0">Thông tin giao hàng</h5></div>
      <div class="card-body">
        <form method="post" action="{{ url_for('checkout_submit', restaurant_id=r.id) }}">
          <div class="mb-3">
            <label class="form-label">Họ tên người nhận <span class="text-danger">*</span></label>
            <input type="text" class="form-control" name="ship_name" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">Số điện thoại <span class="text-danger">*</span></label>
            <input type="tel" class="form-control" name="ship_phone" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">Địa chỉ giao hàng <span class="text-danger">*</span></label>
            <input type="text" class="form-control" name="ship_address" required placeholder="Số nhà, đường, phường/xã, quận/huyện, tỉnh/thành"/>
          </div>

          <div class="mb-3">
            <label class="form-label">Phương thức thanh toán</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payment_method" id="pm_cod" value="COD" checked>
              <label class="form-check-label" for="pm_cod">Thanh toán khi nhận hàng (COD)</label>
            </div>
<!--            <div class="form-check">-->
<!--              <input class="form-check-input" type="radio" name="payment_method" id="pm_card" value="CARD">-->
<!--              <label class="form-check-label" for="pm_card">Thẻ (mô phỏng)</label>-->
<!--            </div>-->
<!--            <div class="form-check">-->
<!--              <input class="form-check-input" type="radio" name="payment_method" id="pm_ew" value="EWALLET">-->
<!--              <label class="form-check-label" for="pm_ew">Ví điện tử (mô phỏng)</label>-->
<!--            </div>-->
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payment_method" id="pm_bank" value="BANK">
              <label class="form-check-label" for="pm_bank">Chuyển khoản ngân hàng</label>
            </div>
          </div>

          <div class="d-flex justify-content-end">
            <button class="btn btn-primary">Đặt hàng</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-5">
    <div class="card h-100">
      <div class="card-header"><h5 class="mb-0">Tóm tắt đơn hàng</h5></div>
      <div class="card-body">
        {% for it in rows %}
          <div class="d-flex justify-content-between mb-2">
            <div>{{ it.item_name }} <span class="text-muted">x{{ it.quantity }}</span></div>
            <div class="fw-semibold">{{ '%.0f' | format(it.line_total) }} đ</div>
          </div>
        {% endfor %}
        <hr/>
        <div class="d-flex justify-content-between">
          <div class="fw-semibold">Tổng tiền</div>
          <div class="fs-5 fw-bold">{{ '%.0f' | format(total) }} đ</div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
